function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+p+5":function(e,t,r){"use strict";r.r(t),r.d(t,"OrderModule",(function(){return we}));var a,i=r("tyNb"),n=r("M0ag"),o=r("M9IT"),c=r("Dh3D"),s=r("+0xr"),u=r("fXoL"),d=r("zE9r"),l=(r("H4X+"),r("tomM"),r("LZqa"),r("AJX/"),r("qnbw"),r("tk/3")),b=r("J9tS"),m=((a=function(){function e(t,r){_classCallCheck(this,e),this.http=t,this.backend=r,this.basicAction="orders/"}return _createClass(e,[{key:"getOrders",value:function(){return this.backend.getAll(this.basicAction+"?_expand=customer").map(this.extractData).catch(this.handleError)}},{key:"getOrder",value:function(e){return 0===e?d.a.of(this.initializeOrder()):this.backend.getById("".concat(this.basicAction).concat(e,"?_expand=customer")).map(this.extractData).do((function(e){return console.log("getOrder: "+JSON.stringify(e))})).catch(this.handleError)}},{key:"deleteOrder",value:function(e){return this.backend.delete("".concat(this.basicAction).concat(e)).catch(this.handleError)}},{key:"saveOrder",value:function(e){return 0===e.id?this.createOrder(e):this.updateOrder(e)}},{key:"createOrder",value:function(e){return e.id=void 0,this.backend.create(this.basicAction,e).map(this.extractData).catch(this.handleError)}},{key:"updateOrder",value:function(e){return this.backend.update("".concat(this.basicAction).concat(e.id),e).map((function(){return e})).catch(this.handleError)}},{key:"extractData",value:function(e){var t=e.json?e.json():e;return t.data?t.data:t||{}}},{key:"handleError",value:function(e){return console.error(e),d.a.throw(e.json()||"Server error")}},{key:"initializeOrder",value:function(){return{id:0,avatar:null,reference:null,amount:0,products:Array(),orderDate:null,shippedDate:null,shipAddress:{},customerId:0,quantity:0,membership:!1,customer:null}}}]),e}()).\u0275fac=function(e){return new(e||a)(u.Yb(l.a),u.Yb(b.b))},a.\u0275prov=u.Kb({token:a,factory:a.\u0275fac}),a),f=r("0IaG"),p=r("dNgK"),h=r("Wp6s"),g=r("/t3+"),v=r("bTqV"),C=r("NFeN"),y=r("kmnG"),T=r("qFsG"),k=r("XhcP"),U=r("MutI"),A=r("3Pt+"),O=r("f0Cb"),I=r("ofXK");function M(e,t){1&e&&(u.Ub(0,"mat-header-cell",39),u.Ac(1," Reference No. "),u.Tb())}function S(e,t){if(1&e&&(u.Ub(0,"mat-cell"),u.Ac(1),u.Tb()),2&e){var r=t.$implicit;u.Cb(1),u.Cc(" ",r.reference," ")}}function w(e,t){1&e&&(u.Ub(0,"mat-header-cell",39),u.Ac(1," Quantity "),u.Tb())}function F(e,t){if(1&e&&(u.Ub(0,"mat-cell"),u.Ac(1),u.Tb()),2&e){var r=t.$implicit;u.Cb(1),u.Cc(" ",r.products.length," ")}}function D(e,t){1&e&&(u.Ub(0,"mat-header-cell",39),u.Ac(1," Amount "),u.Tb())}function P(e,t){if(1&e&&(u.Ub(0,"mat-cell"),u.Ac(1),u.Tb()),2&e){var r=t.$implicit;u.Cb(1),u.Cc(" ",r.amount," ")}}function x(e,t){1&e&&(u.Ub(0,"mat-header-cell",39),u.Ac(1," Customer "),u.Tb())}function q(e,t){if(1&e&&(u.Ub(0,"mat-cell"),u.Ac(1),u.Tb()),2&e){var r=t.$implicit;u.Cb(1),u.Cc(" ",r.customerName," ")}}function _(e,t){1&e&&(u.Ub(0,"mat-header-cell",39),u.Ac(1," Order Date "),u.Tb())}function z(e,t){if(1&e&&(u.Ub(0,"mat-cell"),u.Ac(1),u.hc(2,"date"),u.Tb()),2&e){var r=t.$implicit;u.Cb(1),u.Cc(" ",u.ic(2,1,r.orderDate)," ")}}function N(e,t){1&e&&(u.Ub(0,"mat-header-cell",39),u.Ac(1," Shipped Date "),u.Tb())}function L(e,t){if(1&e&&(u.Ub(0,"mat-cell"),u.Ac(1),u.hc(2,"date"),u.Tb()),2&e){var r=t.$implicit;u.Cb(1),u.Cc(" ",u.ic(2,1,r.shippedDate)," ")}}function E(e,t){1&e&&u.Pb(0,"mat-header-cell",40)}var R=function(e){return["/orders/edit/",e]};function j(e,t){if(1&e){var r=u.Vb();u.Ub(0,"mat-cell",40),u.Ub(1,"button",41),u.Ub(2,"mat-icon"),u.Ac(3,"edit"),u.Tb(),u.Tb(),u.Ub(4,"button",42),u.cc("click",(function(){u.tc(r);var e=t.$implicit;return u.gc().openDialog(e.id)})),u.Ub(5,"mat-icon"),u.Ac(6,"delete"),u.Tb(),u.Tb(),u.Tb()}if(2&e){var a=t.$implicit;u.Cb(1),u.mc("routerLink",u.oc(1,R,a.id))}}function V(e,t){1&e&&u.Pb(0,"mat-header-row")}function $(e,t){1&e&&u.Pb(0,"mat-row")}var B,H,Q,G=function(){return["/orders/edit/",0]},K=function(){return[5,10]},J=((Q=function(){function e(t,r,a){_classCallCheck(this,e),this.orderService=t,this.dialog=r,this.snackBar=a,this.pageTitle="Orders",this.showImage=!1,this.listFilter={},this.displayedColumns=["reference","quantity","amount","customerName","orderDate","shippedDate","id"],this.dataSource=null,this.pager={},this.searchFilter={reference:"",amount:"",quantity:""}}return _createClass(e,[{key:"toggleImage",value:function(){this.showImage=!this.showImage}},{key:"applyFilter",value:function(e){e=(e=e.trim()).toLowerCase(),this.dataSource.filter=e}},{key:"freshDataList",value:function(e){this.orders=e,this.orderList=e.map((function(e){var t=e;return e.customerName=e.customer.firstname+" "+e.customer.lastname,t})),this.totalAmount=this.orders.length,this.dataSource=new s.k(this.orderList),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"ngOnInit",value:function(){var e=this;this.orderService.getOrders().subscribe((function(t){e.freshDataList(t)}),(function(t){return e.errorMessage=t})),this.searchFilter={},this.listFilter={}}},{key:"getOrders",value:function(e){var t=this;this.orderService.getOrders().subscribe((function(e){t.freshDataList(e)}),(function(e){return t.errorMessage=e}))}},{key:"searchOrders",value:function(e){var t=this;e&&this.orderService.getOrders().subscribe((function(r){t.orders=r,console.log(t.orders.length),t.orders=t.orders.filter((function(a){var i=!0;return Object.keys(e).forEach((function(t){i=i&&e[t]?a[t].toLocaleLowerCase().indexOf(e[t].toLocaleLowerCase())>-1:i})),t.freshDataList(r),i}))}),(function(e){return t.errorMessage=e}))}},{key:"resetListFilter",value:function(){this.listFilter={},this.getOrders()}},{key:"reset",value:function(){this.listFilter={},this.searchFilter={},this.getOrders()}},{key:"resetSearchFilter",value:function(e){e.toggle(),this.searchFilter={},this.getOrders()}},{key:"openSnackBar",value:function(e,t){this.snackBar.open(e,t,{duration:1500})}},{key:"openDialog",value:function(e){var t=this,r=this.dialog.open(n.a,{data:{title:"Dialog",message:"Are you sure to delete this item?"}});r.disableClose=!0,r.afterClosed().subscribe((function(a){t.selectedOption=a,t.selectedOption===r.componentInstance.ACTION_CONFIRM&&t.orderService.deleteOrder(e).subscribe((function(){t.orderService.getOrders().subscribe((function(e){t.freshDataList(e)}),(function(e){return t.errorMessage=e})),t.openSnackBar("The item has been deleted successfully. ","Close")}),(function(e){t.errorMessage=e,console.log(t.errorMessage),t.openSnackBar("This item has not been deleted successfully. Please try again.","Close")}))}))}}]),e}()).\u0275fac=function(e){return new(e||Q)(u.Ob(m),u.Ob(f.b),u.Ob(p.a))},Q.\u0275cmp=u.Ib({type:Q,selectors:[["order-list"]],viewQuery:function(e,t){var r;1&e&&(u.Fc(o.a,!0),u.Fc(c.a,!0)),2&e&&(u.qc(r=u.dc())&&(t.paginator=r.first),u.qc(r=u.dc())&&(t.sort=r.first))},features:[u.Bb([n.a])],decls:83,vars:14,consts:[[1,"light",2,"height","100%"],[1,"view-card-title"],["mat-mini-fab","",2,"margin-right","10px","background-color","#e07c9e",3,"routerLink"],["mat-mini-fab","",2,"margin-right","10px","background-color","#a28b6e",3,"click"],["mat-mini-fab","",2,"margin-right","10px","background-color","darkgray",3,"click"],[1,"title-spacer"],["appearance","standard",1,"search-form-fileld"],["matInput","",3,"keyup"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","reference"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","quantity"],["matColumnDef","amount"],["matColumnDef","customerName"],["matColumnDef","orderDate"],["matColumnDef","shippedDate"],["matColumnDef","id"],["style","justify-content:right;",4,"matHeaderCellDef"],["style","justify-content:right;",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions","length"],["paginator",""],["position","end","position","end","dark","","mode","push","opened","false",1,"search-panel"],["sidenav",""],[1,"profile-card"],["mat-card-avatar","",1,"avatar"],[2,"margin-left","20px"],["matInput","","type","text","placeholder","Reference No.","name","reference",3,"ngModel","ngModelChange"],["reference",""],["matInput","","type","text","placeholder","Order Date","name","reference",3,"ngModel","ngModelChange"],["matInput","","type","text","placeholder","Customer","name","amount",3,"ngModel","ngModelChange"],["amount",""],["matInput","","type","text","placeholder","Customer Email","name","quantity",3,"ngModel","ngModelChange"],["quantity",""],["mat-raised-button","",2,"color","lightgrey","background-color","darkgreen","margin","5px",3,"click"],["mat-raised-button","",2,"color","lightgrey","background-color","darkred","margin","5px",3,"click"],["mat-sort-header",""],[2,"justify-content","right"],["mat-mini-fab","",2,"background-color","teal","min-height","30px","margin","5px",3,"routerLink"],["mat-mini-fab","",2,"background-color","lightblue","min-height","30px","margin","5px",3,"click"]],template:function(e,t){if(1&e){var r=u.Vb();u.Ub(0,"mat-card",0),u.Ub(1,"mat-card-header"),u.Ub(2,"mat-card-title",1),u.Ub(3,"h1"),u.Ac(4),u.Tb(),u.Tb(),u.Tb(),u.Ub(5,"mat-toolbar"),u.Ub(6,"mat-toolbar-row"),u.Ub(7,"button",2),u.Ub(8,"mat-icon"),u.Ac(9,"add"),u.Tb(),u.Tb(),u.Ub(10,"button",3),u.cc("click",(function(){return u.tc(r),u.rc(51).toggle()})),u.Ub(11,"mat-icon"),u.Ac(12,"search"),u.Tb(),u.Tb(),u.Ub(13,"button",4),u.cc("click",(function(){return t.reset()})),u.Ub(14,"mat-icon"),u.Ac(15,"refresh"),u.Tb(),u.Tb(),u.Pb(16,"span",5),u.Ub(17,"mat-form-field",6),u.Ub(18,"mat-label"),u.Ac(19,"Filter"),u.Tb(),u.Ub(20,"input",7),u.cc("keyup",(function(e){return t.applyFilter(e.target.value)})),u.Tb(),u.Ub(21,"mat-icon"),u.Ac(22,"filter_list"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(23,"mat-table",8,9),u.Sb(25,10),u.zc(26,M,2,0,"mat-header-cell",11),u.zc(27,S,2,1,"mat-cell",12),u.Rb(),u.Sb(28,13),u.zc(29,w,2,0,"mat-header-cell",11),u.zc(30,F,2,1,"mat-cell",12),u.Rb(),u.Sb(31,14),u.zc(32,D,2,0,"mat-header-cell",11),u.zc(33,P,2,1,"mat-cell",12),u.Rb(),u.Sb(34,15),u.zc(35,x,2,0,"mat-header-cell",11),u.zc(36,q,2,1,"mat-cell",12),u.Rb(),u.Sb(37,16),u.zc(38,_,2,0,"mat-header-cell",11),u.zc(39,z,3,3,"mat-cell",12),u.Rb(),u.Sb(40,17),u.zc(41,N,2,0,"mat-header-cell",11),u.zc(42,L,3,3,"mat-cell",12),u.Rb(),u.Sb(43,18),u.zc(44,E,1,0,"mat-header-cell",19),u.zc(45,j,7,3,"mat-cell",20),u.Rb(),u.zc(46,V,1,0,"mat-header-row",21),u.zc(47,$,1,0,"mat-row",22),u.Tb(),u.Pb(48,"mat-paginator",23,24),u.Tb(),u.Ub(50,"mat-sidenav",25,26),u.Ub(52,"mat-card",27),u.Ub(53,"mat-card-header"),u.Ub(54,"div",28),u.Ub(55,"mat-icon"),u.Ac(56,"search"),u.Tb(),u.Tb(),u.Ub(57,"mat-card-title"),u.Ac(58," Advanced Search "),u.Tb(),u.Tb(),u.Tb(),u.Ub(59,"mat-nav-list",29),u.Ub(60,"mat-form-field"),u.Ub(61,"input",30,31),u.cc("ngModelChange",(function(e){return t.searchFilter.reference=e})),u.Tb(),u.Tb(),u.Ub(63,"mat-form-field"),u.Ub(64,"input",32,31),u.cc("ngModelChange",(function(e){return t.searchFilter.orderDate=e})),u.Tb(),u.Tb(),u.Ub(66,"mat-form-field"),u.Ub(67,"input",33,34),u.cc("ngModelChange",(function(e){return t.searchFilter.customerName=e})),u.Tb(),u.Tb(),u.Ub(69,"mat-form-field"),u.Ub(70,"input",35,36),u.cc("ngModelChange",(function(e){return t.searchFilter.customerEmail=e})),u.Tb(),u.Tb(),u.Tb(),u.Pb(72,"mat-divider"),u.Ub(73,"mat-card-header"),u.Ub(74,"mat-action-list"),u.Ub(75,"button",37),u.cc("click",(function(){u.tc(r);var e=u.rc(51);return t.searchOrders(t.searchFilter),e.toggle()})),u.Ub(76,"mat-icon"),u.Ac(77,"search"),u.Tb(),u.Ac(78,"Search "),u.Tb(),u.Ub(79,"button",38),u.cc("click",(function(){u.tc(r);var e=u.rc(51);return t.resetSearchFilter(e)})),u.Ub(80,"mat-icon"),u.Ac(81,"refresh"),u.Tb(),u.Ac(82,"Reset "),u.Tb(),u.Tb(),u.Tb(),u.Tb()}2&e&&(u.Cb(4),u.Bc(t.pageTitle),u.Cb(3),u.mc("routerLink",u.nc(12,G)),u.Cb(16),u.mc("dataSource",t.dataSource),u.Cb(23),u.mc("matHeaderRowDef",t.displayedColumns),u.Cb(1),u.mc("matRowDefColumns",t.displayedColumns),u.Cb(1),u.mc("pageSize",10)("pageSizeOptions",u.nc(13,K))("length",t.totalAmount),u.Cb(13),u.mc("ngModel",t.searchFilter.reference),u.Cb(3),u.mc("ngModel",t.searchFilter.orderDate),u.Cb(3),u.mc("ngModel",t.searchFilter.customerName),u.Cb(3),u.mc("ngModel",t.searchFilter.customerEmail))},directives:[h.a,h.e,h.h,g.a,g.c,v.a,i.g,C.a,y.c,y.f,T.b,s.j,c.a,s.c,s.e,s.b,s.g,s.i,o.a,k.a,h.c,U.f,A.b,A.k,A.n,O.a,U.a,s.d,c.b,s.a,s.f,s.h],pipes:[I.f],styles:["thead[_ngcontent-%COMP%]{color:#337ab7}.title-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.search-form-fileld[_ngcontent-%COMP%]{margin-right:20px}.table-responsive[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:300px}.mat-table[_ngcontent-%COMP%]{overflow:auto}.filter-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:200px}"]}),Q),X=((H=function(){function e(t){_classCallCheck(this,e),this.router=t}return _createClass(e,[{key:"canActivate",value:function(e){var t=+e.url[1].path;return!(isNaN(t)||t<1)||(alert("Invalid order Id"),this.router.navigate(["/orders"]),!1)}}]),e}()).\u0275fac=function(e){return new(e||H)(u.Yb(i.f))},H.\u0275prov=u.Kb({token:H,factory:H.\u0275fac}),H),W=((B=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"canDeactivate",value:function(e){if(e.orderForm.dirty){var t=e.orderForm.get("reference").value||"New Order";return confirm("Navigate away and lose all changes to ".concat(t,"?"))}return!0}}]),e}()).\u0275fac=function(e){return new(e||B)},B.\u0275prov=u.Kb({token:B,factory:B.\u0275fac}),B);r("t/4F"),r("Xr5q"),r("6Br6");var Y=r("WyWZ"),Z=r("QEVK"),ee=(r("nscy"),r("JiIv"),r("8/IB")),te=(r("qvFY"),r("dvAK"),r("L1xU"),r("0AqG"));function re(e,t){if(1&e&&(u.Ub(0,"mat-error"),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Cc(" ",r.displayMessage.product," ")}}function ae(e,t){if(1&e&&(u.Ub(0,"mat-error"),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Cc(" ",r.displayMessage.price," ")}}function ie(e,t){if(1&e&&(u.Ub(0,"mat-error"),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Cc(" ",r.displayMessage.quantity," ")}}r("d7gL");var ne,oe=((ne=function(){function e(t,r,a,i,n,o,c){_classCallCheck(this,e),this.fb=t,this.route=r,this.router=a,this.productService=i,this.customerService=n,this.data=o,this.dialogRef=c,this.ACTION_CANCEL="CANCEL",this.ACTION_SAVE="SAVE",this.pageTitle="Add product to order",this.displayMessage={},this.validationMessages={product:{required:"Product first name is required.",minlength:"Product first name must be at least one characters.",maxlength:"Product first name cannot exceed 100 characters."},price:{range:"Rewards of the product must be between 1 (lowest) and 9999 (highest)."},quantity:{range:"Rewards of the product must be between 1 (lowest) and 20 (highest)."},customerId:{range:"Rewards of the product must be between 1 (lowest) and 99999 (highest)."}},this.genericValidator=new Z.a(this.validationMessages)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.productForm=this.fb.group({product:["",[A.r.required,A.r.minLength(3),A.r.maxLength(100)]],price:["",Y.a.range(1,99999)],quantity:["",Y.a.range(1,20)],customerId:["",Y.a.range(1,9999999)],membership:!1}),this.sub=this.route.params.subscribe((function(t){e.getProduct(+t.id)})),this.getCustomers()}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}},{key:"ngAfterViewInit",value:function(){var e,t=this,r=this.formInputElements.map((function(e){return d.a.fromEvent(e.nativeElement,"blur")}));(e=d.a).merge.apply(e,[this.productForm.valueChanges].concat(_toConsumableArray(r))).debounceTime(800).subscribe((function(){t.displayMessage=t.genericValidator.processMessages(t.productForm)}))}},{key:"getProduct",value:function(e){var t=this;this.productService.getProduct(e).subscribe((function(e){return t.onProductRetrieved(e)}),(function(e){return t.errorMessage=e}))}},{key:"getCustomers",value:function(){var e=this;this.customerService.getCustomers().subscribe((function(t){e.customers=t}),(function(t){return e.errorMessage=t}))}},{key:"onProductRetrieved",value:function(e){this.productForm&&this.productForm.reset(),this.product=e,this.pageTitle=0===this.product.id?"Add Product":"Edit Product: ".concat(this.product.productName," ").concat(this.product.unitPrice),this.productForm.patchValue({product:this.product.productName,price:this.product.unitPrice,quantity:this.product.unitInStock})}},{key:"deleteProduct",value:function(){var e=this;0===this.product.id?this.onSaveComplete():confirm("Really delete the product: ".concat(this.product.productName,"?"))&&this.productService.deleteProduct(this.product.id).subscribe((function(){return e.onSaveComplete()}),(function(t){return e.errorMessage=t}))}},{key:"saveProduct",value:function(){var e=this;if(this.productForm.dirty&&this.productForm.valid){var t=Object.assign({},this.product,this.productForm.value);this.productService.saveProduct(t).subscribe((function(){return e.onSaveComplete()}),(function(t){return e.errorMessage=t}))}else this.productForm.dirty||this.onSaveComplete()}},{key:"onSaveComplete",value:function(){this.productForm.reset(),this.router.navigate(["/products"])}}]),e}()).\u0275fac=function(e){return new(e||ne)(u.Ob(A.c),u.Ob(i.a),u.Ob(i.f),u.Ob(ee.a),u.Ob(te.a),u.Ob(f.a),u.Ob(f.g))},ne.\u0275cmp=u.Ib({type:ne,selectors:[["ng-component"]],viewQuery:function(e,t){var r;1&e&&u.Fc(A.d,!0,u.l),2&e&&u.qc(r=u.dc())&&(t.formInputElements=r)},decls:20,vars:7,consts:[["mat-dialog-title",""],["novalidate","",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"dialog-field"],["matInput","","type","text","placeholder","Product (required)","formControlName","product"],["productId",""],[4,"ngIf"],["matInput","","placeholder","Amount","id","priceId","type","number","placeholder","Price (required)","formControlName","price"],["matInput","","placeholder","Quantity","id","quantityId","type","number","placeholder","Quantity (required)","formControlName","quantity"],["mat-raised-button","",3,"mat-dialog-close"]],template:function(e,t){1&e&&(u.Ub(0,"div",0),u.Ac(1),u.Tb(),u.Ub(2,"mat-dialog-content"),u.Ub(3,"form",1),u.cc("ngSubmit",(function(){return t.saveProduct()})),u.Ub(4,"mat-form-field",2),u.Pb(5,"input",3,4),u.zc(7,re,2,1,"mat-error",5),u.Tb(),u.Ub(8,"mat-form-field",2),u.Pb(9,"input",6),u.zc(10,ae,2,1,"mat-error",5),u.Tb(),u.Ub(11,"mat-form-field",2),u.Pb(12,"input",7),u.zc(13,ie,2,1,"mat-error",5),u.Tb(),u.Tb(),u.Tb(),u.Ub(14,"mat-dialog-actions"),u.Ub(15,"button",8),u.Ac(16,"Confirm"),u.Tb(),u.Ub(17,"button",8),u.Ac(18,"Cancel"),u.Tb(),u.Tb(),u.Ac(19,">")),2&e&&(u.Cb(1),u.Cc(" ",t.pageTitle,"\n"),u.Cb(2),u.mc("formGroup",t.productForm),u.Cb(4),u.mc("ngIf",t.displayMessage.product),u.Cb(3),u.mc("ngIf",t.displayMessage.price),u.Cb(3),u.mc("ngIf",t.displayMessage.quantity),u.Cb(2),u.mc("mat-dialog-close",t.ACTION_SAVE),u.Cb(2),u.mc("mat-dialog-close",t.ACTION_CANCEL))},directives:[f.h,f.e,A.s,A.l,A.f,y.c,T.b,A.b,A.k,A.d,I.n,A.o,f.c,v.a,f.d,y.b],encapsulation:2}),ne),ce=r("0MNC"),se=r("zkoq"),ue=r("d3UM"),de=r("iadO"),le=r("FKr1");function be(e,t){if(1&e&&(u.Ub(0,"mat-option",30),u.Ac(1),u.Tb()),2&e){var r=t.$implicit;u.mc("value",r.id),u.Cb(1),u.Dc(" ",r.firstname," ",r.lastname," ")}}function me(e,t){if(1&e&&(u.Ub(0,"mat-error"),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Cc(" ",r.displayMessage.reference," ")}}function fe(e,t){if(1&e&&(u.Ub(0,"mat-error"),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Cc(" ",r.displayMessage.amount," ")}}function pe(e,t){if(1&e&&(u.Ub(0,"mat-error"),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Cc(" ",r.displayMessage.quantity," ")}}function he(e,t){if(1&e&&(u.Ub(0,"mat-error",31),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Cc(" ",r.displayMessage.address," ")}}function ge(e,t){if(1&e&&(u.Ub(0,"mat-error",31),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Cc(" ",r.displayMessage.city," ")}}function ve(e,t){if(1&e&&(u.Ub(0,"mat-error",31),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Cc(" ",r.displayMessage.country," ")}}function Ce(e,t){if(1&e&&(u.Ub(0,"mat-error",31),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Cc(" ",r.displayMessage.zipcode," ")}}function ye(e,t){if(1&e){var r=u.Vb();u.Ub(0,"mat-list-item",34),u.Ub(1,"mat-icon",35),u.Ac(2,"folder"),u.Tb(),u.Ub(3,"h4",36),u.Ac(4),u.Tb(),u.Ub(5,"button",37),u.cc("click",(function(){u.tc(r);var e=t.$implicit;return u.gc(2).openDialog(e)})),u.Ub(6,"mat-icon"),u.Ac(7,"delete"),u.Tb(),u.Tb(),u.Ub(8,"p",36),u.Ac(9),u.hc(10,"number"),u.Tb(),u.Tb()}if(2&e){var a=t.$implicit;u.Cb(4),u.Cc("",a.productName," "),u.Cb(5),u.Cc(" AUD $",u.jc(10,2,a.unitPrice,"0.00")," ")}}function Te(e,t){if(1&e&&(u.Ub(0,"mat-list"),u.Ub(1,"h3",32),u.Ac(2,"Products"),u.Tb(),u.zc(3,ye,11,5,"mat-list-item",33),u.Tb()),2&e){var r=u.gc();u.Cb(3),u.mc("ngForOf",r.order.products)}}function ke(e,t){if(1&e&&(u.Ub(0,"div",38),u.Ac(1),u.Tb()),2&e){var r=u.gc();u.Cb(1),u.Bc(r.errorMessage)}}var Ue,Ae,Oe=function(){return["/orders"]},Ie=((Ue=function(){function e(t,r,a,i,n,o,c){var s=this;_classCallCheck(this,e),this.fb=t,this.route=r,this.router=a,this.orderService=i,this.customerService=n,this.dialog=o,this.breakpointObserver=c,this.pageTitle="Update Order",this.order={},this.fieldColspan=4,this.displayMessage={},this.validationMessages={reference:{required:"Order reference is required.",minlength:"Order reference must be at least one characters.",maxlength:"Order reference cannot exceed 100 characters."},amount:{required:"Order amount is required.",range:"Amount of the order must be between 1 (lowest) and 9999 (highest)."},quantity:{required:"Order quantity is required.",range:"Quantity of the order must be between 1 (lowest) and 20 (highest)."},customerId:{required:"Customer is required."}},c.observe([ce.b.HandsetLandscape,ce.b.HandsetPortrait]).subscribe((function(e){s.onScreensizeChange()})),this.genericValidator=new Z.a(this.validationMessages)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.orderForm=this.fb.group({reference:["",[A.r.required,A.r.minLength(3),A.r.maxLength(100)]],amount:["",[A.r.required,Y.a.range(1,99999)]],quantity:["",[A.r.required,Y.a.range(1,20)]],orderDate:[""],shippedDate:[""],address:["",[A.r.required]],city:["",[A.r.required]],country:["",[A.r.required]],zipcode:["",[A.r.required]],customerId:["",A.r.required],products:this.fb.array([]),membership:!1}),this.sub=this.route.params.subscribe((function(t){e.getOrder(+t.id)})),this.getCustomers()}},{key:"ngOnDestroy",value:function(){this.sub.unsubscribe()}},{key:"ngAfterViewInit",value:function(){var e,t=this,r=this.formInputElements.map((function(e){return d.a.fromEvent(e.nativeElement,"blur")}));(e=d.a).merge.apply(e,[this.orderForm.valueChanges].concat(_toConsumableArray(r))).debounceTime(800).subscribe((function(){t.displayMessage=t.genericValidator.processMessages(t.orderForm)}))}},{key:"getOrder",value:function(e){var t=this;this.orderService.getOrder(e).subscribe((function(e){return t.onOrderRetrieved(e)}),(function(e){return t.errorMessage=e}))}},{key:"getCustomers",value:function(){var e=this;this.customerService.getCustomers().subscribe((function(t){e.customers=t}),(function(t){return e.errorMessage=t}))}},{key:"onOrderRetrieved",value:function(e){var t=this;this.orderForm&&this.orderForm.reset(),this.order=e,this.pageTitle=0===this.order.id?"Add Order":"Update Order: ".concat(this.order.reference," "),this.orderForm.patchValue({reference:this.order.reference,amount:this.order.amount,quantity:this.order.products.length,orderDate:new Date(this.order.orderDate),shippedDate:new Date(this.order.shippedDate),address:this.order.shipAddress.address,city:this.order.shipAddress.city,country:this.order.shipAddress.country,zipcode:this.order.shipAddress.zipcode,customerId:this.order.customerId,membership:this.order.membership});var r=this.order.products.map((function(e){return t.fb.group({productName:[e.productName],price:[e.unitPrice]})})),a=this.fb.array(r);this.orderForm.setControl("products",a)}},{key:"saveOrder",value:function(){var e=this;if(this.orderForm.dirty&&this.orderForm.valid){var t=Object.assign({},this.order,this.orderForm.value);this.orderService.saveOrder(t).subscribe((function(){return e.onSaveComplete()}),(function(t){return e.errorMessage=t}))}else!this.orderForm.dirty&&this.orderForm.valid&&this.onSaveComplete()}},{key:"onSaveComplete",value:function(){this.orderForm.reset(),this.router.navigate(["/orders"])}},{key:"addProduct",value:function(e){var t=this.dialog.open(oe,{height:"400px",width:"600px",data:{title:"Dialog"}});t.disableClose=!0,t.afterClosed().subscribe((function(e){})),e.preventDefault()}},{key:"openDialog",value:function(e){var t=this.dialog.open(n.a,{data:{title:"Dialog",message:"Are you sure to delete this item?"}});t.disableClose=!0,t.afterClosed().subscribe((function(){}))}},{key:"onScreensizeChange",value:function(){var e=this.breakpointObserver.isMatched("(max-width: 599px)"),t=this.breakpointObserver.isMatched("(max-width: 959px)");console.log(" isLess600  ".concat(e," \n        isLess1000 ").concat(t,"  ")),this.fieldColspan=t?e?12:6:3}},{key:"deleteProduct",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ue)(u.Ob(A.c),u.Ob(i.a),u.Ob(i.f),u.Ob(m),u.Ob(te.a),u.Ob(f.b),u.Ob(ce.a))},Ue.\u0275cmp=u.Ib({type:Ue,selectors:[["order-form"]],viewQuery:function(e,t){var r;1&e&&u.Fc(A.d,!0,u.l),2&e&&u.qc(r=u.dc())&&(t.formInputElements=r)},features:[u.Bb([oe])],decls:67,vars:32,consts:[["novalidate","",3,"formGroup","ngSubmit"],[2,"background-color","#FFF"],[1,"view-card-title"],[1,"title-spacer"],["mat-mini-fab","","type","submit",1,"primary",2,"margin-right","10px","background-color","darkgray",3,"disabled"],["mat-mini-fab","",1,"",2,"margin-right","10px",3,"routerLink"],["mat-mini-fab","",1,"accent",2,"margin-right","10px","background-color","#e07c9e",3,"click"],[2,"margin","5 0 5 0px"],[1,"form-card"],["cols","12","rowHeight","80px"],[3,"colspan"],["appearance","outline",1,"form-field"],["placeholder","Select Customer","formControlName","customerId",3,"value","valueChange"],["customerIdId",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Reference No","id","referenceId","type","text","placeholder","Reference No. (required)","formControlName","reference"],[4,"ngIf"],["matInput","","placeholder","Amount","id","amountId","type","number","placeholder","Price (required)","formControlName","amount"],["matInput","","placeholder","Quantity","id","quantityId","type","number","placeholder","Quantity (required)","formControlName","quantity"],["matInput","","placeholder","Order date",3,"matDatepicker","value"],["matSuffix","",3,"for"],["orderpickerId",""],["matInput","","placeholder","Shipped date",3,"matDatepicker","value"],["shippedDateId",""],["matInput","","placeholder","Address","id","addressId","type","text","formControlName","address","disabled",""],["class","help-block",4,"ngIf"],["matInput","","placeholder","City","id","cityId","type","text","formControlName","city"],["matInput","","placeholder","Country","id","countryId","type","text","formControlName","country"],["matInput","","placeholder","Zipcode","id","zipcodeId","type","text","formControlName","zipcode"],["class","has-error",4,"ngIf"],[3,"value"],[1,"help-block"],["mat-subheader",""],["style","background-color:#e7ecf7; padding-bottom:2px; margin-bottom:5px;",4,"ngFor","ngForOf"],[2,"background-color","#e7ecf7","padding-bottom","2px","margin-bottom","5px"],["mat-list-icon",""],["mat-line",""],["mat-mini-fab","",2,"background-color","lightgrey","float","right",3,"click"],[1,"has-error"]],template:function(e,t){if(1&e&&(u.Ub(0,"form",0),u.cc("ngSubmit",(function(){return t.saveOrder()})),u.Ub(1,"mat-card"),u.Ub(2,"mat-toolbar",1),u.Ub(3,"mat-toolbar-row"),u.Ub(4,"span",2),u.Ac(5),u.Tb(),u.Pb(6,"span",3),u.Ub(7,"mat-card-actions"),u.Ub(8,"button",4),u.Ub(9,"mat-icon"),u.Ac(10,"save"),u.Tb(),u.Tb(),u.Ub(11,"button",5),u.Ub(12,"mat-icon"),u.Ac(13,"cancel"),u.Tb(),u.Tb(),u.Ub(14,"button",6),u.cc("click",(function(e){return t.addProduct(e)})),u.Ub(15,"mat-icon"),u.Ac(16,"add"),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.Ub(17,"mat-card-content",7),u.Ub(18,"div",8),u.Ub(19,"mat-grid-list",9),u.Ub(20,"mat-grid-tile",10),u.Ub(21,"mat-form-field",11),u.Ub(22,"mat-select",12,13),u.cc("valueChange",(function(e){return t.order.customerId=e})),u.zc(24,be,2,3,"mat-option",14),u.Tb(),u.Tb(),u.Tb(),u.Ub(25,"mat-grid-tile",10),u.Ub(26,"mat-form-field",11),u.Pb(27,"input",15),u.zc(28,me,2,1,"mat-error",16),u.Tb(),u.Tb(),u.Ub(29,"mat-grid-tile",10),u.Ub(30,"mat-form-field",11),u.Pb(31,"input",17),u.zc(32,fe,2,1,"mat-error",16),u.Tb(),u.Tb(),u.Ub(33,"mat-grid-tile",10),u.Ub(34,"mat-form-field",11),u.Pb(35,"input",18),u.zc(36,pe,2,1,"mat-error",16),u.Tb(),u.Tb(),u.Ub(37,"mat-grid-tile",10),u.Ub(38,"mat-form-field",11),u.Pb(39,"input",19),u.Pb(40,"mat-datepicker-toggle",20),u.Pb(41,"mat-datepicker",null,21),u.Tb(),u.Tb(),u.Ub(43,"mat-grid-tile",10),u.Ub(44,"mat-form-field",11),u.Pb(45,"input",22),u.Pb(46,"mat-datepicker-toggle",20),u.Pb(47,"mat-datepicker",null,23),u.Tb(),u.Tb(),u.Ub(49,"mat-grid-tile",10),u.Ub(50,"mat-form-field",11),u.Pb(51,"input",24),u.zc(52,he,2,1,"mat-error",25),u.Tb(),u.Tb(),u.Ub(53,"mat-grid-tile",10),u.Ub(54,"mat-form-field",11),u.Pb(55,"input",26),u.zc(56,ge,2,1,"mat-error",25),u.Tb(),u.Tb(),u.Ub(57,"mat-grid-tile",10),u.Ub(58,"mat-form-field",11),u.Pb(59,"input",27),u.zc(60,ve,2,1,"mat-error",25),u.Tb(),u.Tb(),u.Ub(61,"mat-grid-tile",10),u.Ub(62,"mat-form-field",11),u.Pb(63,"input",28),u.zc(64,Ce,2,1,"mat-error",25),u.Tb(),u.Tb(),u.Tb(),u.Tb(),u.zc(65,Te,4,1,"mat-list",16),u.zc(66,ke,2,1,"div",29),u.Tb(),u.Tb(),u.Tb()),2&e){var r=u.rc(42),a=u.rc(48);u.mc("formGroup",t.orderForm),u.Cb(5),u.Cc(" ",t.pageTitle,""),u.Cb(3),u.mc("disabled",!t.orderForm.valid),u.Cb(3),u.mc("routerLink",u.nc(31,Oe)),u.Cb(9),u.mc("colspan",t.fieldColspan),u.Cb(2),u.mc("value",t.order.customerId),u.Cb(2),u.mc("ngForOf",t.customers),u.Cb(1),u.mc("colspan",t.fieldColspan),u.Cb(3),u.mc("ngIf",t.displayMessage.reference),u.Cb(1),u.mc("colspan",t.fieldColspan),u.Cb(3),u.mc("ngIf",t.displayMessage.amount),u.Cb(1),u.mc("colspan",t.fieldColspan),u.Cb(3),u.mc("ngIf",t.displayMessage.quantity),u.Cb(1),u.mc("colspan",t.fieldColspan),u.Cb(2),u.mc("matDatepicker",r)("value",t.order.orderDate),u.Cb(1),u.mc("for",r),u.Cb(3),u.mc("colspan",t.fieldColspan),u.Cb(2),u.mc("matDatepicker",a)("value",t.order.shippedDate),u.Cb(1),u.mc("for",a),u.Cb(3),u.mc("colspan",t.fieldColspan),u.Cb(3),u.mc("ngIf",t.displayMessage.address),u.Cb(1),u.mc("colspan",t.fieldColspan),u.Cb(3),u.mc("ngIf",t.displayMessage.city),u.Cb(1),u.mc("colspan",t.fieldColspan),u.Cb(3),u.mc("ngIf",t.displayMessage.country),u.Cb(1),u.mc("colspan",t.fieldColspan),u.Cb(3),u.mc("ngIf",t.displayMessage.zipcode),u.Cb(1),u.mc("ngIf",null!=t.order&&null!=t.order.products),u.Cb(1),u.mc("ngIf",t.errorMessage)}},directives:[A.s,A.l,A.f,h.a,g.a,g.c,h.b,v.a,C.a,i.g,h.d,se.a,se.c,y.c,ue.a,A.k,A.d,I.m,T.b,A.b,I.n,A.o,de.b,de.d,y.g,de.a,le.n,y.b,U.a,U.e,U.c,U.b,le.j],pipes:[I.g],styles:[".title-spacer[_ngcontent-%COMP%] {\n      flex: 1 1 auto;\n    }\n  .form-field[_ngcontent-%COMP%]{\n      width: 100%;\n      margin-left: 20px;\n      margin-right: 20px;\n    }"]}),Ue),Me=r("PCNd"),Se=r("5dmV"),we=((Ae=function e(){_classCallCheck(this,e)}).\u0275mod=u.Mb({type:Ae}),Ae.\u0275inj=u.Lb({factory:function(e){return new(e||Ae)},providers:[m,X,W,te.a,ee.a],imports:[[Me.a,Se.a,i.i.forChild([{path:"",component:J},{path:"edit/:id",canDeactivate:[W],component:Ie}])]]}),Ae)}}]);